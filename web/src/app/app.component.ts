// Copyright (c) 2019 VMware, Inc. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
//

import {
  Component,
  ElementRef,
  OnDestroy,
  OnInit,
  ViewChild,
} from '@angular/core';
import { Navigation } from './models/navigation';
import { WebsocketService } from './modules/overview/services/websocket/websocket.service';
import { IconService } from './modules/overview/services/icon.service';

@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.scss'],
})
export class AppComponent implements OnInit, OnDestroy {
  @ViewChild('scrollTarget', { static: false }) scrollTarget: ElementRef;
  navigation: Navigation;
  previousUrl: string;

  constructor(
    private websocketService: WebsocketService,
    private iconService: IconService
  ) {
    iconService.load({
      iconName: 'lissio-logo',
      // tslint:disable-next-line:max-line-length
      iconSource: `<svg width="85" height="85" viewBox="0 0 85 85" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" baseProfile="full"><g transform="scale(1,-1) translate(0,-85)"><image opacity="1.000000" xlink:href="data:image/png;base64,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" width="106.000000" height="106.000000" transform="translate(-8.000000,93.000000) scale(1,-1)"></image><path d="M 71.559263 36.730551 C 71.559263 56.196670 55.778858 71.977076 36.312742 71.977076 C 16.846625 71.977076 1.066221 56.196670 1.066221 36.730551 C 1.066221 17.264433 16.846625 1.484027 36.312742 1.484027 C 55.778858 1.484027 71.559263 17.264433 71.559263 36.730551 Z" transform="scale(1.000000,1.000000) translate(6.000000,6.000000)" fill="#1e5fff" opacity="1.000000"></path><path d="M 49.258573 25.730551 C 49.258573 38.955471 38.537659 49.676387 25.312742 49.676387 C 12.087824 49.676387 1.366910 38.955471 1.366910 25.730551 C 1.366910 12.505632 12.087824 1.784716 25.312742 1.784716 C 38.537659 1.784716 49.258573 12.505632 49.258573 25.730551 Z" transform="scale(1.000000,1.000000) translate(17.000000,17.000000)" fill="#ffffff" opacity="1.000000"></path><path d="M 23.393203 12.730546 C 23.393203 18.850122 18.432308 23.811019 12.312735 23.811019 C 6.193161 23.811019 1.232267 18.850122 1.232267 12.730546 C 1.232267 6.610969 6.193161 1.650073 12.312735 1.650073 C 18.432308 1.650073 23.393203 6.610969 23.393203 12.730546 Z" transform="scale(1.000000,1.000000) translate(30.000000,30.000000)" fill="#1b8cff" opacity="1.000000"></path><path d="M 49.788557 26.730553 C 49.788557 39.143602 39.725793 49.206367 27.312745 49.206367 C 14.899697 49.206367 4.836934 39.143602 4.836934 26.730553 C 4.836934 14.317504 14.899697 4.254740 27.312745 4.254740 C 39.725793 4.254740 49.788557 14.317504 49.788557 26.730553 Z M 52.816915 26.730553 C 52.816915 12.644988 41.398309 1.226382 27.312745 1.226382 C 13.227181 1.226382 1.808576 12.644988 1.808576 26.730553 C 1.808576 40.816118 13.227181 52.234725 27.312745 52.234725 C 41.398309 52.234725 52.816915 40.816118 52.816915 26.730553 Z" transform="scale(1.000000,1.000000) translate(15.000000,16.000000)" fill="#ffffff" opacity="1.000000"></path><path d="M 23.929529 13.730549 C 23.929529 19.041754 19.623948 23.347335 14.312743 23.347335 C 9.001539 23.347335 4.695958 19.041754 4.695958 13.730549 C 4.695958 8.419345 9.001539 4.113764 14.312743 4.113764 C 19.623948 4.113764 23.929529 8.419345 23.929529 13.730549 Z M 26.957887 13.730549 C 26.957887 6.746830 21.296463 1.085406 14.312743 1.085406 C 7.329023 1.085406 1.667600 6.746830 1.667600 13.730549 C 1.667600 20.714269 7.329023 26.375693 14.312743 26.375693 C 21.296463 26.375693 26.957887 20.714269 26.957887 13.730549 Z" transform="scale(1.000000,1.000000) translate(28.000000,29.000000)" fill="#ffffff" opacity="1.000000"></path><path d="M 72.955978 39.730551 C 72.955978 57.758919 58.341101 72.373799 40.312738 72.373799 C 22.284374 72.373799 7.669497 57.758919 7.669497 39.730551 C 7.669497 21.702183 22.284374 7.087304 40.312738 7.087304 C 58.341101 7.087304 72.955978 21.702183 72.955978 39.730551 Z M 78.807317 39.730551 C 78.807317 18.470578 61.572707 1.235965 40.312738 1.235965 C 19.052768 1.235965 1.818158 18.470578 1.818158 39.730551 C 1.818158 60.990524 19.052768 78.225138 40.312738 78.225138 C 61.572707 78.225138 78.807317 60.990524 78.807317 39.730551 Z" transform="scale(1.000000,1.000000) translate(2.000000,3.000000)" fill="#ffffff" opacity="1.000000"></path><path d="M 78.636380 40.730551 C 78.636380 61.343834 61.926016 78.054201 41.312738 78.054201 C 20.699459 78.054201 3.989095 61.343834 3.989095 40.730551 C 3.989095 20.117269 20.699459 3.406901 41.312738 3.406901 C 61.926016 3.406901 78.636380 20.117269 78.636380 40.730551 Z M 80.748845 40.730551 C 80.748845 18.950586 63.092699 1.294436 41.312738 1.294436 C 19.532777 1.294436 1.876630 18.950586 1.876630 40.730551 C 1.876630 62.510516 19.532777 80.166667 41.312738 80.166667 C 63.092699 80.166667 80.748845 62.510516 80.748845 40.730551 Z" transform="scale(1.000000,1.000000) translate(1.000000,2.000000)" fill="#ffffff" opacity="1.000000"></path></g></svg>`,
    });
  }

  ngOnInit(): void {
    this.websocketService.open();
  }

  closeSocket() {
    this.websocketService.close();
  }

  ngOnDestroy(): void {
    this.closeSocket();
  }
}
